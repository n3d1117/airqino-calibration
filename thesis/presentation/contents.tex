\section{Introduzione}
\begin{frame}{Contesto}

L’inquinamento atmosferico è uno dei principali problemi che interessano le aree urbanizzate.
\vspace{0.3cm}
\begin{itemize}
 \item Può portare a problemi di salute causati dall’esposizione a lungo termine a sostanze nocive (PM, \ce{NO2}, \ce{CO2}, \ce{O3})\vspace{0.3cm}
 \item Il monitoraggio è essenziale per la tutela della salute pubblica\vspace{0.1cm}
 \begin{enumerate}
 \item Con reti regionali di rilevamento fisse, gestite da ARPA (DLgs. n.155 del 13/08/2010)\vspace{0.1cm}
 \item Con nuove reti di sensori \textit{low cost} ad alta portabilità per l'acquisizione di misure aggiuntive, anche a minor precisione (es. \textbf{AirQino})
\end{enumerate}
\end{itemize}

\end{frame}

\begin{frame}{La piattaforma AirQino (1/3)}
\begin{columns}

\begin{column}{0.45\textwidth}

\begin{itemize}
  \item Monitoraggio ambientale ad alta precisione
  \item Configurabile ed estendibile
  \item Dati in tempo reale
\end{itemize}\vspace{0.1cm}

\begin{figure}[H]
\centering
\captionsetup{justification=centering}
\includegraphics[width=.6\textwidth]{images/airqino_stazione}
\caption{Una centralina AirQino}
\end{figure}

\end{column}

\begin{column}{0.65\textwidth}

\begin{center}
\alert{https://airqino.magentalab.it}
\vspace{-0.3cm}
\begin{figure}[H]
\centering
\captionsetup{justification=centering}
\includegraphics[width=\textwidth]{images/airqino_web_n}
\caption{Pagina web AirQino}
\end{figure}
\end{center}

\end{column}

\end{columns}
\end{frame}

\begin{frame}[t]{La piattaforma AirQino (2/3) – Architettura}
\begin{center}

\begin{figure}[H]
\centering
\captionsetup{justification=centering}
\includegraphics[width=.8\textwidth]{images/airqino_arch.png}
\caption{Architettura della piattaforma}
\end{figure}

\end{center}
\end{frame}

\begin{frame}[t]{La piattaforma AirQino (3/3) – Sensori}
\begin{columns}

\begin{column}{0.5\textwidth}
\begin{center}

\begin{block}{MiCS-2714 per \ce{NO2}}
\begin{figure}[H]
    \centering
    \subfloat[\centering Sensore]{{\includegraphics[width=2.4cm]{images/mics1-removebg-preview} }}
    \subfloat[\centering Circuito]{{\includegraphics[width=2.4cm]{images/mics2-removebg-preview} }}
\end{figure}
\vspace{0.1cm}
\begin{itemize}
  \item Di tipo MOS
  \item Basato su ossidoriduzione
  \item Uscita in \textit{counts}
\end{itemize}
\vspace{0.1cm}

\end{block}

\end{center}
\end{column}

\begin{column}{0.5\textwidth}
\begin{center}
\begin{block}{SDS011 per \ce{PM_{2.5}} e \ce{PM_{10}}}
\begin{figure}[H]
    \centering
    \subfloat[\centering Sensore]{{\includegraphics[width=2cm]{images/sds1} }}
    \subfloat[\centering Componenti]{{\includegraphics[width=2.7cm]{images/sds2_rmbg} }}
\end{figure}
\vspace{0.1cm}
\begin{itemize}
  \item Basato su principio di diffusione ottica
  \item Uscita in $\mathrm{\si{\micro}g/m^3}$
  \item Più costoso
\end{itemize}
\vspace{0.1cm}

\end{block}
\end{center}
\end{column}

\end{columns}
\end{frame}

\begin{frame}{Obiettivi}
\begin{itemize}
  \item Sviluppi tecnologici alla piattaforma
  \begin{enumerate}
    \item Miglioramento dell'\textbf{affidabilità} dei dati provenienti dai sensori
    \item Riduzione dei \textbf{tempi di risposta} dal database
  \end{enumerate}\vspace{0.3cm}
  \item Studio e confronto tra diverse tecniche volte a migliorare l’accuratezza del processo di \textbf{calibrazione} dei sensori (sia \ce{NO2} che PM)\vspace{0.3cm}
  \item Sviluppo di un’\textbf{interfaccia web} per facilitare la calibrazione \textit{massiva} di centraline
\end{itemize}
\end{frame}


\section{Sviluppi tecnologici}
\begin{frame}{Sviluppi – Replica del database (1/2)}
\begin{block}{Replica}
Tutti i dati del database vengono copiati e distribuiti su un altro spazio fisico. La nuova istanza agisce come nodo secondario.  
\end{block}

\vspace{0.6cm}
\begin{columns}

\begin{column}{0.6\textwidth}
\textbf{Vantaggi:}\vspace{0.1cm}
\begin{itemize}
  \item Maggiore \textbf{affidabilità}
  \item Miglioramento delle \textbf{prestazioni}
  \item Maggiore \textbf{sicurezza} dei dati
\end{itemize}
\end{column}

\begin{column}{0.4\textwidth}
\textbf{Svantaggi:}\vspace{0.1cm}
\begin{itemize}
  \item Mantenimento
  \item Implementazione
  \item Costo
\end{itemize}
\end{column}

\end{columns}

\end{frame}

\begin{frame}{Sviluppi – Replica del database (2/2)}

\begin{columns}

\begin{column}{0.45\textwidth}
\begin{block}{Streaming replication}
Funzionalità che consente di replicare i dati in tempo reale da una istanza di database Postgres a un’altra

\begin{itemize}
  \item Replica di sola lettura
  \item Basata su \textbf{WAL}
  \item Automazione con Docker\vspace{0.1cm}
\end{itemize}
\end{block}
\end{column}

\begin{column}{0.55\textwidth}
\begin{figure}[H]
\centering
\captionsetup{justification=centering}
\includegraphics[width=\textwidth]{images/streaming_replication}
\caption{Streaming replication}
\end{figure}
\end{column}

\end{columns}

\end{frame}


\begin{frame}{Sviluppi – Ottimizzazione di query temporali (1/2)}

\begin{columns}

\begin{column}{0.45\textwidth}
\begin{block}{Continuous aggregates}
Funzionalità di \textbf{Timescale} per aggregare dati in tempo reale in maniera incrementale

\begin{itemize}
  \item Miglioramento delle \textbf{performance}
  \item Aggiornamento \textbf{automatico} in background
  \item Risparmio di \textbf{spazio}\vspace{0.1cm}
\end{itemize}
\end{block}
\end{column}

\begin{column}{0.55\textwidth}
\begin{figure}[H]
\centering
\captionsetup{justification=centering}
\includegraphics[width=\textwidth]{images/continuous_aggregates_r}
\caption{Continuous aggregates}
\end{figure}
\end{column}

\end{columns}

\end{frame}

\begin{frame}{Sviluppi – Ottimizzazione di query temporali (2/2)}
Tempi di risposta della query per estrarre la media oraria di \ce{NO2} dell'ultima settimana da tutte le centraline \textbf{AirQino}:

\begin{columns}
\begin{column}{0.55\textwidth}
\begin{figure}[H]
\centering
\captionsetup{justification=centering}
\includegraphics[width=\textwidth]{images/query_prima}
\caption{Prima dell'ottimizzazione}
\end{figure}
\end{column}

\begin{column}{0.55\textwidth}
\begin{figure}[H]
\centering
\captionsetup{justification=centering}
\includegraphics[width=\textwidth]{images/query_dopo}
\caption{Dopo l'ottimizzazione}
\end{figure}
\end{column}
\end{columns}

\end{frame}


\section{Calibrazione}

\begin{frame}{Calibrazione (1/4) – Procedura}

\begin{block}{Procedura per ogni sensore (\ce{NO2}, \ce{PM_{2.5}}, \ce{PM10})}
\begin{enumerate}
  \item Preprocessamento e creazione di un \textbf{dataset} (dati della centralina AirQino SMART16 e di riferimento ARPAT)
  \item \textbf{Allineamento} temporale e ricampionamento
  \item \textbf{Scatterplot} del segnale di riferimento e del segnale del sensore
  \item Analisi dei \textbf{residui}
  \item Applicazione di tredici diversi modelli di \alert{regressione} (sia lineare che non lineare)
  \begin{itemize}
    \item Su tutto il dataset
    \item Con cadenza mensile
  \end{itemize}
  \item Valutazione della \textbf{performance} in termini di $R^2$ e $RMSE$
  \item \textbf{Validazione} del modello più performante\vspace{0.1cm}
\end{enumerate}
\end{block}

\end{frame}

\begin{frame}{Calibrazione (2/4)  – Risultati}
\begin{columns}

\begin{column}{0.55\textwidth}

\begin{center}
\begin{figure}[H]
\centering
\captionsetup{justification=centering}
\includegraphics[width=\textwidth]{images/hist_pm2.5_1.png}
\caption{Risultati \ce{PM_{2.5}} ($R^2$)}
\end{figure}
\end{center}

\end{column}
\begin{column}{0.55\textwidth}

\begin{center}
\begin{figure}[H]
\centering
\captionsetup{justification=centering}
\includegraphics[width=\textwidth]{images/hist_pm2.5_2.png}
\caption{Risultati \ce{PM_{10}} ($RMSE$)}
\end{figure}
\end{center}

\end{column}
  
\end{columns}

\end{frame}

\begin{frame}{Calibrazione (3/4) – Modello più performante}

\begin{columns}
\begin{column}{0.45\textwidth}

\begin{block}{Regressione lineare avanzata}
Con rimozione dei valori anomali (\textit{outlier}) in base a determinate metriche.\vspace{0.2cm}

\textbf{Distanza di Cook:}
$$D_{i}=\frac{\sum_{j=1}^{n}\left(\hat{y}_{j}-\hat{y}_{j(i)}\right)^{2}}{p  * MSE^{2}}$$

\textbf{Soglia di cut-off}:
$D_{i}>\frac{4}{n}$

\vspace{0.1cm}
\end{block}

\end{column}

\begin{column}{0.55\textwidth}

\begin{center}
\begin{figure}[H]
\centering
\captionsetup{justification=centering}
\includegraphics[width=\textwidth]{images/cook_no2.png}
\caption{Rilevamento di outlier (in rosso) tramite distanza di Cook}
\end{figure}
\end{center}

\end{column}

\end{columns}

\end{frame}

\begin{frame}{Calibrazione (4/4) – Validazione}
\begin{center}
\begin{figure}[H]
\centering
\captionsetup{justification=centering}
\includegraphics[width=\textwidth]{images/val_pm2.5.png}
\caption{Confronto tra l’andamento temporale delle concentrazioni di \ce{PM_{2.5}} misurate dalla stazione AirQino calibrata e non calibrata con riferimento alla stazione ARPAT di Capannori (LU). Medie a otto ore. Periodo dal 01/09/2021 al 20/11/2021.}
\end{figure}
\end{center}
\end{frame}

\section{Interfaccia}
\begin{frame}{Interfaccia (1/2)}

\vspace{-0.2cm}
\begin{center}
Soluzione per la calibrazione massiva di centraline \textbf{AirQino}:  
\end{center}

\vspace{-0.2cm}
\begin{columns}

\begin{column}{0.43\textwidth}
\vspace{-.6cm}
\begin{itemize}
  \item Per permettere di inserire più \textbf{coefficienti} contemporaneamente
  \item Basata su caricamento di file \textbf{csv} appositi
  \item Con riepilogo degli esiti in forma di tabella
\end{itemize}

\end{column}

\begin{column}{0.65\textwidth}

\begin{center}
\begin{figure}[H]
\centering
\captionsetup{justification=centering}
\vspace{-0.2cm}
\includegraphics[width=\textwidth]{images/interfaccia_2_r}
\caption{Pagina web calibrazione}
\end{figure}
\end{center}

\end{column}

\end{columns}
\end{frame}

\begin{frame}{Interfaccia (2/2)}
\begin{columns}

\begin{column}{0.43\textwidth}

\begin{itemize}
  \item Distinzione visiva per esiti diversi di ciascun sensore
  \item Con un meccanismo di \textbf{autenticazione} per proteggere da utenti di terze parti (\textit{Keycloak})
  \item Processo di rilascio automatizzato (\textit{CI/CD}) con isolamento delle dipendenze (\textit{Docker})
\end{itemize}

\end{column}

\begin{column}{0.65\textwidth}

\begin{center}
\begin{figure}[H]
\centering
\captionsetup{justification=centering}
\includegraphics[width=\textwidth]{images/interfaccia_7}
\caption{Calibrazione con esiti diversi}
\end{figure}
\end{center}

\end{column}


\end{columns}
\end{frame}


\section{Conclusioni e sviluppi futuri}
\begin{frame}{Conclusioni e sviluppi futuri (1/2)}
\begin{itemize}
  \item Le reti di sensori \textit{low-cost} per il monitoraggio della qualità dell'aria, come \textbf{AirQino}, possano rappresentare una soluzione efficace per il rilevamento dell'inquinamento atmosferico ad alta risoluzione sia temporale che spaziale
  \begin{itemize}
    \item Queste soluzioni possono integrarsi con le reti di monitoraggio regionali già esistenti fornendo un quadro più completo della qualità dell'aria in ambiente urbano
  \end{itemize}\vspace{0.2cm}
  \item Anche con sensori a basso costo è possibile misurare inquinanti come \ce{PM_{2.5}} e \ce{PM10} con una buona accuratezza
  \begin{itemize}
    \item Ancora migliore se si ha a disposizione un segnale di riferimento ARPAT con cui correggere i dati proveniente dai sensori
    \item L'applicazione di tecniche di regressione robusta in fase di calibrazione ha riportato miglioramenti significativi in termini di accuratezza
  \end{itemize}
\end{itemize}
\end{frame}

\begin{frame}{Conclusioni e sviluppi futuri (2/2)}
\begin{itemize}
  \item Perfezionare il processo di calibrazione delle centraline, ad esempio aggiungendo ulteriori variabili in input modello di regressione, come la \textbf{temperatura} e l'\textbf{umidità} relativa, e verificare se questo porti ad un aumento dell'accuratezza della predizione
  \begin{itemize}
    \item La temperatura tende a correlare negativamente con i PM (all'aumentare della temperatura le polveri sottili tendono a calare), mentre l'umidità presenta l'effetto contrario
  \end{itemize}\vspace{0.2cm}
  \item Realizzazione di una \textbf{procedura di allerta} sul segnale delle centraline
  \begin{itemize}
    \item Con un controllo in tempo reale sull'andamento del segnale e monitorando la differenza con il segnale di riferimento (es. stazione ARPAT)
  \end{itemize}
\end{itemize}
\end{frame}

